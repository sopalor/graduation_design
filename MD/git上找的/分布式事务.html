<html>
<head>
  <title>分布式事务</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600475 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <meta name="content-class" content="yinxiang.markdown"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="477"/>
<h1>分布式事务</h1>

<div><span><div style="font-size: 14px; margin: 0; padding: 0; width: 100%;"><h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">面试题</h2>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">分布式事务了解吗？你们是如何解决分布式事务问题的？</p>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">面试官心理分析</h2>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">只要聊到你做了分布式系统，必问分布式事务，你对分布式事务一无所知的话，确实会很坑，你起码得知道有哪些方案，一般怎么来做，每个方案的优缺点是什么。</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">现在面试，分布式系统成了标配，而分布式系统带来的<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">分布式事务</strong>也成了标配了。因为你做系统肯定要用事务吧，如果是分布式系统，肯定要用分布式事务吧。先不说你搞过没有，起码你得明白有哪几种方案，每种方案可能有啥坑？比如 TCC 方案的网络问题、XA 方案的一致性问题。</p>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">面试题剖析</h2>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">分布式事务的实现主要有以下 5 种方案：</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">XA 方案</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">TCC 方案</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">本地消息表</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">可靠消息最终一致性方案</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">最大努力通知方案</li>
</ul>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">两阶段提交方案/XA方案</h3>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">所谓的 XA 方案，即：两阶段提交，有一个<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">事务管理器</strong>的概念，负责协调多个数据库（资源管理器）的事务，事务管理器先问问各个数据库你准备好了吗？如果每个数据库都回复 ok，那么就正式提交事务，在各个数据库上执行操作；如果任何其中一个数据库回答不 ok，那么就回滚事务。</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">这种分布式事务方案，比较适合单块应用里，跨多个库的分布式事务，而且因为严重依赖于数据库层面来搞定复杂的事务，效率很低，绝对不适合高并发的场景。如果要玩儿，那么基于 <code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">Spring + JTA</code> 就可以搞定，自己随便搜个 demo 看看就知道了。</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">这个方案，我们很少用，一般来说<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">某个系统内部如果出现跨多个库</strong>的这么一个操作，是<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">不合规</strong>的。我可以给大家介绍一下， 现在微服务，一个大的系统分成几十个甚至几百个服务。一般来说，我们的规定和规范，是要求<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">每个服务只能操作自己对应的一个数据库</strong>。</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">如果你要操作别的服务对应的库，不允许直连别的服务的库，违反微服务架构的规范，你随便交叉胡乱访问，几百个服务的话，全体乱套，这样的一套服务是没法管理的，没法治理的，可能会出现数据被别人改错，自己的库被别人写挂等情况。</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">如果你要操作别人的服务的库，你必须是通过<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">调用别的服务的接口</strong>来实现，绝对不允许交叉访问别人的数据库。</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="/images/distributed-transaction-XA.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"></img></p>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">TCC 方案</h3>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">TCC 的全称是：<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">Try</code>、<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">Confirm</code>、<code style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; color: #c1788b; padding: 4px 4px 2px 0; letter-spacing: -.3px;">Cancel</code>。</p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative;">Try 阶段：这个阶段说的是对各个服务的资源做检测以及对资源进行<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">锁定或者预留</strong>。</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">Confirm 阶段：这个阶段说的是在各个服务中<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">执行实际的操作</strong>。</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative;">Cancel 阶段：如果任何一个服务的业务方法执行出错，那么这里就需要<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">进行补偿</strong>，就是执行已经执行成功的业务逻辑的回滚操作。（把那些执行成功的回滚）</li>
</ul>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">这种方案说实话几乎很少人使用，我们用的也比较少，但是也有使用的场景。因为这个<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">事务回滚</strong>实际上是<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">严重依赖于你自己写代码来回滚和补偿</strong>了，会造成补偿代码巨大，非常之恶心。</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">比如说我们，一般来说跟<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">钱</strong>相关的，跟钱打交道的，<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">支付</strong>、<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">交易</strong>相关的场景，我们会用 TCC，严格保证分布式事务要么全部成功，要么全部自动回滚，严格保证资金的正确性，保证在资金上不会出现问题。</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">而且最好是你的各个业务执行的时间都比较短。</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">但是说实话，一般尽量别这么搞，自己手写回滚逻辑，或者是补偿逻辑，实在太恶心了，那个业务代码是很难维护的。</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="/images/distributed-transaction-TCC.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"></img></p>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">本地消息表</h3>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">本地消息表其实是国外的 ebay 搞出来的这么一套思想。</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">这个大概意思是这样的：</p>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">A 系统在自己本地一个事务里操作同时，插入一条数据到消息表；</li>
<li style="line-height: 160%; box-sizing: content-box;">接着 A 系统将这个消息发送到 MQ 中去；</li>
<li style="line-height: 160%; box-sizing: content-box;">B 系统接收到消息之后，在一个事务里，往自己本地消息表里插入一条数据，同时执行其他的业务操作，如果这个消息已经被处理过了，那么此时这个事务会回滚，这样<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">保证不会重复处理消息</strong>；</li>
<li style="line-height: 160%; box-sizing: content-box;">B 系统执行成功之后，就会更新自己本地消息表的状态以及 A 系统消息表的状态；</li>
<li style="line-height: 160%; box-sizing: content-box;">如果 B 系统处理失败了，那么就不会更新消息表状态，那么此时 A 系统会定时扫描自己的消息表，如果有未处理的消息，会再次发送到 MQ 中去，让 B 再次处理；</li>
<li style="line-height: 160%; box-sizing: content-box;">这个方案保证了最终一致性，哪怕 B 事务失败了，但是 A 会不断重发消息，直到 B 那边成功为止。</li>
</ol>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">这个方案说实话最大的问题就在于<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">严重依赖于数据库的消息表来管理事务</strong>啥的，如果是高并发场景咋办呢？咋扩展呢？所以一般确实很少用。</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="/images/distributed-transaction-local-message-table.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"></img></p>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">可靠消息最终一致性方案</h3>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">这个的意思，就是干脆不要用本地的消息表了，直接基于 MQ 来实现事务。比如阿里的 RocketMQ 就支持消息事务。</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">大概的意思就是：</p>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">A 系统先发送一个 prepared 消息到 mq，如果这个 prepared 消息发送失败那么就直接取消操作别执行了；</li>
<li style="line-height: 160%; box-sizing: content-box;">如果这个消息发送成功过了，那么接着执行本地事务，如果成功就告诉 mq 发送确认消息，如果失败就告诉 mq 回滚消息；</li>
<li style="line-height: 160%; box-sizing: content-box;">如果发送了确认消息，那么此时 B 系统会接收到确认消息，然后执行本地的事务；</li>
<li style="line-height: 160%; box-sizing: content-box;">mq 会自动<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">定时轮询</strong>所有 prepared 消息回调你的接口，问你，这个消息是不是本地事务处理失败了，所有没发送确认的消息，是继续重试还是回滚？一般来说这里你就可以查下数据库看之前本地事务是否执行，如果回滚了，那么这里也回滚吧。这个就是避免可能本地事务执行成功了，而确认消息却发送失败了。</li>
<li style="line-height: 160%; box-sizing: content-box;">这个方案里，要是系统 B 的事务失败了咋办？重试咯，自动不断重试直到成功，如果实在是不行，要么就是针对重要的资金类业务进行回滚，比如 B 系统本地回滚后，想办法通知系统 A 也回滚；或者是发送报警由人工来手工回滚和补偿。</li>
<li style="line-height: 160%; box-sizing: content-box;">这个还是比较合适的，目前国内互联网公司大都是这么玩儿的，要不你举用 RocketMQ 支持的，要不你就自己基于类似 ActiveMQ？RabbitMQ？自己封装一套类似的逻辑出来，总之思路就是这样子的。</li>
</ol>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="/images/distributed-transaction-reliable-message.png" style="line-height: 160%; margin: 4px 0 10px; box-sizing: border-box; vertical-align: top; max-width: 100%;"></img></p>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">最大努力通知方案</h3>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">这个方案的大致意思就是：</p>
<ol style="line-height: 160%; box-sizing: content-box; display: block; padding-left: 30px; margin: 6px 0 10px; color: #333; list-style-type: decimal;">
<li style="line-height: 160%; box-sizing: content-box;">系统 A 本地事务执行完之后，发送个消息到 MQ；</li>
<li style="line-height: 160%; box-sizing: content-box;">这里会有个专门消费 MQ 的<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">最大努力通知服务</strong>，这个服务会消费 MQ 然后写入数据库中记录下来，或者是放入个内存队列也可以，接着调用系统 B 的接口；</li>
<li style="line-height: 160%; box-sizing: content-box;">要是系统 B 执行成功就 ok 了；要是系统 B 执行失败了，那么最大努力通知服务就定时尝试重新调用系统 B，反复 N 次，最后还是不行就放弃。</li>
</ol>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">你们公司是如何处理分布式事务的？</h3>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">如果你真的被问到，可以这么说，我们某某特别严格的场景，用的是 TCC 来保证强一致性；然后其他的一些场景基于阿里的 RocketMQ 来实现分布式事务。</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">你找一个严格资金要求绝对不能错的场景，你可以说你是用的 TCC 方案；如果是一般的分布式事务场景，订单插入之后要调用库存服务更新库存，库存数据没有资金那么的敏感，可以用可靠消息最终一致性方案。</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">友情提示一下，RocketMQ 3.2.6 之前的版本，是可以按照上面的思路来的，但是之后接口做了一些改变，我这里不再赘述了。</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">当然如果你愿意，你可以参考可靠消息最终一致性方案来自己实现一套分布式事务，比如基于 RocketMQ 来玩儿。</p>
</div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%23%23%20%E9%9D%A2%E8%AF%95%E9%A2%98%0A%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E4%BA%86%E8%A7%A3%E5%90%97%EF%BC%9F%E4%BD%A0%E4%BB%AC%E6%98%AF%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E9%97%AE%E9%A2%98%E7%9A%84%EF%BC%9F%0A%0A%23%23%20%E9%9D%A2%E8%AF%95%E5%AE%98%E5%BF%83%E7%90%86%E5%88%86%E6%9E%90%0A%E5%8F%AA%E8%A6%81%E8%81%8A%E5%88%B0%E4%BD%A0%E5%81%9A%E4%BA%86%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%EF%BC%8C%E5%BF%85%E9%97%AE%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%EF%BC%8C%E4%BD%A0%E5%AF%B9%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E4%B8%80%E6%97%A0%E6%89%80%E7%9F%A5%E7%9A%84%E8%AF%9D%EF%BC%8C%E7%A1%AE%E5%AE%9E%E4%BC%9A%E5%BE%88%E5%9D%91%EF%BC%8C%E4%BD%A0%E8%B5%B7%E7%A0%81%E5%BE%97%E7%9F%A5%E9%81%93%E6%9C%89%E5%93%AA%E4%BA%9B%E6%96%B9%E6%A1%88%EF%BC%8C%E4%B8%80%E8%88%AC%E6%80%8E%E4%B9%88%E6%9D%A5%E5%81%9A%EF%BC%8C%E6%AF%8F%E4%B8%AA%E6%96%B9%E6%A1%88%E7%9A%84%E4%BC%98%E7%BC%BA%E7%82%B9%E6%98%AF%E4%BB%80%E4%B9%88%E3%80%82%0A%0A%E7%8E%B0%E5%9C%A8%E9%9D%A2%E8%AF%95%EF%BC%8C%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E6%88%90%E4%BA%86%E6%A0%87%E9%85%8D%EF%BC%8C%E8%80%8C%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E5%B8%A6%E6%9D%A5%E7%9A%84**%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1**%E4%B9%9F%E6%88%90%E4%BA%86%E6%A0%87%E9%85%8D%E4%BA%86%E3%80%82%E5%9B%A0%E4%B8%BA%E4%BD%A0%E5%81%9A%E7%B3%BB%E7%BB%9F%E8%82%AF%E5%AE%9A%E8%A6%81%E7%94%A8%E4%BA%8B%E5%8A%A1%E5%90%A7%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%98%AF%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%EF%BC%8C%E8%82%AF%E5%AE%9A%E8%A6%81%E7%94%A8%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E5%90%A7%E3%80%82%E5%85%88%E4%B8%8D%E8%AF%B4%E4%BD%A0%E6%90%9E%E8%BF%87%E6%B2%A1%E6%9C%89%EF%BC%8C%E8%B5%B7%E7%A0%81%E4%BD%A0%E5%BE%97%E6%98%8E%E7%99%BD%E6%9C%89%E5%93%AA%E5%87%A0%E7%A7%8D%E6%96%B9%E6%A1%88%EF%BC%8C%E6%AF%8F%E7%A7%8D%E6%96%B9%E6%A1%88%E5%8F%AF%E8%83%BD%E6%9C%89%E5%95%A5%E5%9D%91%EF%BC%9F%E6%AF%94%E5%A6%82%20TCC%20%E6%96%B9%E6%A1%88%E7%9A%84%E7%BD%91%E7%BB%9C%E9%97%AE%E9%A2%98%E3%80%81XA%20%E6%96%B9%E6%A1%88%E7%9A%84%E4%B8%80%E8%87%B4%E6%80%A7%E9%97%AE%E9%A2%98%E3%80%82%0A%0A%23%23%20%E9%9D%A2%E8%AF%95%E9%A2%98%E5%89%96%E6%9E%90%0A%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%AE%9E%E7%8E%B0%E4%B8%BB%E8%A6%81%E6%9C%89%E4%BB%A5%E4%B8%8B%205%20%E7%A7%8D%E6%96%B9%E6%A1%88%EF%BC%9A%0A%0A-%20XA%20%E6%96%B9%E6%A1%88%0A-%20TCC%20%E6%96%B9%E6%A1%88%0A-%20%E6%9C%AC%E5%9C%B0%E6%B6%88%E6%81%AF%E8%A1%A8%0A-%20%E5%8F%AF%E9%9D%A0%E6%B6%88%E6%81%AF%E6%9C%80%E7%BB%88%E4%B8%80%E8%87%B4%E6%80%A7%E6%96%B9%E6%A1%88%0A-%20%E6%9C%80%E5%A4%A7%E5%8A%AA%E5%8A%9B%E9%80%9A%E7%9F%A5%E6%96%B9%E6%A1%88%0A%0A%23%23%23%20%E4%B8%A4%E9%98%B6%E6%AE%B5%E6%8F%90%E4%BA%A4%E6%96%B9%E6%A1%88%2FXA%E6%96%B9%E6%A1%88%0A%E6%89%80%E8%B0%93%E7%9A%84%20XA%20%E6%96%B9%E6%A1%88%EF%BC%8C%E5%8D%B3%EF%BC%9A%E4%B8%A4%E9%98%B6%E6%AE%B5%E6%8F%90%E4%BA%A4%EF%BC%8C%E6%9C%89%E4%B8%80%E4%B8%AA**%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E5%99%A8**%E7%9A%84%E6%A6%82%E5%BF%B5%EF%BC%8C%E8%B4%9F%E8%B4%A3%E5%8D%8F%E8%B0%83%E5%A4%9A%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E5%99%A8%EF%BC%89%E7%9A%84%E4%BA%8B%E5%8A%A1%EF%BC%8C%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E5%99%A8%E5%85%88%E9%97%AE%E9%97%AE%E5%90%84%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BD%A0%E5%87%86%E5%A4%87%E5%A5%BD%E4%BA%86%E5%90%97%EF%BC%9F%E5%A6%82%E6%9E%9C%E6%AF%8F%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93%E9%83%BD%E5%9B%9E%E5%A4%8D%20ok%EF%BC%8C%E9%82%A3%E4%B9%88%E5%B0%B1%E6%AD%A3%E5%BC%8F%E6%8F%90%E4%BA%A4%E4%BA%8B%E5%8A%A1%EF%BC%8C%E5%9C%A8%E5%90%84%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8A%E6%89%A7%E8%A1%8C%E6%93%8D%E4%BD%9C%EF%BC%9B%E5%A6%82%E6%9E%9C%E4%BB%BB%E4%BD%95%E5%85%B6%E4%B8%AD%E4%B8%80%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9B%9E%E7%AD%94%E4%B8%8D%20ok%EF%BC%8C%E9%82%A3%E4%B9%88%E5%B0%B1%E5%9B%9E%E6%BB%9A%E4%BA%8B%E5%8A%A1%E3%80%82%0A%0A%E8%BF%99%E7%A7%8D%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%96%B9%E6%A1%88%EF%BC%8C%E6%AF%94%E8%BE%83%E9%80%82%E5%90%88%E5%8D%95%E5%9D%97%E5%BA%94%E7%94%A8%E9%87%8C%EF%BC%8C%E8%B7%A8%E5%A4%9A%E4%B8%AA%E5%BA%93%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%EF%BC%8C%E8%80%8C%E4%B8%94%E5%9B%A0%E4%B8%BA%E4%B8%A5%E9%87%8D%E4%BE%9D%E8%B5%96%E4%BA%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B1%82%E9%9D%A2%E6%9D%A5%E6%90%9E%E5%AE%9A%E5%A4%8D%E6%9D%82%E7%9A%84%E4%BA%8B%E5%8A%A1%EF%BC%8C%E6%95%88%E7%8E%87%E5%BE%88%E4%BD%8E%EF%BC%8C%E7%BB%9D%E5%AF%B9%E4%B8%8D%E9%80%82%E5%90%88%E9%AB%98%E5%B9%B6%E5%8F%91%E7%9A%84%E5%9C%BA%E6%99%AF%E3%80%82%E5%A6%82%E6%9E%9C%E8%A6%81%E7%8E%A9%E5%84%BF%EF%BC%8C%E9%82%A3%E4%B9%88%E5%9F%BA%E4%BA%8E%20%60Spring%20%2B%20JTA%60%20%E5%B0%B1%E5%8F%AF%E4%BB%A5%E6%90%9E%E5%AE%9A%EF%BC%8C%E8%87%AA%E5%B7%B1%E9%9A%8F%E4%BE%BF%E6%90%9C%E4%B8%AA%20demo%20%E7%9C%8B%E7%9C%8B%E5%B0%B1%E7%9F%A5%E9%81%93%E4%BA%86%E3%80%82%0A%0A%E8%BF%99%E4%B8%AA%E6%96%B9%E6%A1%88%EF%BC%8C%E6%88%91%E4%BB%AC%E5%BE%88%E5%B0%91%E7%94%A8%EF%BC%8C%E4%B8%80%E8%88%AC%E6%9D%A5%E8%AF%B4**%E6%9F%90%E4%B8%AA%E7%B3%BB%E7%BB%9F%E5%86%85%E9%83%A8%E5%A6%82%E6%9E%9C%E5%87%BA%E7%8E%B0%E8%B7%A8%E5%A4%9A%E4%B8%AA%E5%BA%93**%E7%9A%84%E8%BF%99%E4%B9%88%E4%B8%80%E4%B8%AA%E6%93%8D%E4%BD%9C%EF%BC%8C%E6%98%AF**%E4%B8%8D%E5%90%88%E8%A7%84**%E7%9A%84%E3%80%82%E6%88%91%E5%8F%AF%E4%BB%A5%E7%BB%99%E5%A4%A7%E5%AE%B6%E4%BB%8B%E7%BB%8D%E4%B8%80%E4%B8%8B%EF%BC%8C%20%E7%8E%B0%E5%9C%A8%E5%BE%AE%E6%9C%8D%E5%8A%A1%EF%BC%8C%E4%B8%80%E4%B8%AA%E5%A4%A7%E7%9A%84%E7%B3%BB%E7%BB%9F%E5%88%86%E6%88%90%E5%87%A0%E5%8D%81%E4%B8%AA%E7%94%9A%E8%87%B3%E5%87%A0%E7%99%BE%E4%B8%AA%E6%9C%8D%E5%8A%A1%E3%80%82%E4%B8%80%E8%88%AC%E6%9D%A5%E8%AF%B4%EF%BC%8C%E6%88%91%E4%BB%AC%E7%9A%84%E8%A7%84%E5%AE%9A%E5%92%8C%E8%A7%84%E8%8C%83%EF%BC%8C%E6%98%AF%E8%A6%81%E6%B1%82**%E6%AF%8F%E4%B8%AA%E6%9C%8D%E5%8A%A1%E5%8F%AA%E8%83%BD%E6%93%8D%E4%BD%9C%E8%87%AA%E5%B7%B1%E5%AF%B9%E5%BA%94%E7%9A%84%E4%B8%80%E4%B8%AA%E6%95%B0%E6%8D%AE%E5%BA%93**%E3%80%82%0A%0A%E5%A6%82%E6%9E%9C%E4%BD%A0%E8%A6%81%E6%93%8D%E4%BD%9C%E5%88%AB%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%AF%B9%E5%BA%94%E7%9A%84%E5%BA%93%EF%BC%8C%E4%B8%8D%E5%85%81%E8%AE%B8%E7%9B%B4%E8%BF%9E%E5%88%AB%E7%9A%84%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%BA%93%EF%BC%8C%E8%BF%9D%E5%8F%8D%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E7%9A%84%E8%A7%84%E8%8C%83%EF%BC%8C%E4%BD%A0%E9%9A%8F%E4%BE%BF%E4%BA%A4%E5%8F%89%E8%83%A1%E4%B9%B1%E8%AE%BF%E9%97%AE%EF%BC%8C%E5%87%A0%E7%99%BE%E4%B8%AA%E6%9C%8D%E5%8A%A1%E7%9A%84%E8%AF%9D%EF%BC%8C%E5%85%A8%E4%BD%93%E4%B9%B1%E5%A5%97%EF%BC%8C%E8%BF%99%E6%A0%B7%E7%9A%84%E4%B8%80%E5%A5%97%E6%9C%8D%E5%8A%A1%E6%98%AF%E6%B2%A1%E6%B3%95%E7%AE%A1%E7%90%86%E7%9A%84%EF%BC%8C%E6%B2%A1%E6%B3%95%E6%B2%BB%E7%90%86%E7%9A%84%EF%BC%8C%E5%8F%AF%E8%83%BD%E4%BC%9A%E5%87%BA%E7%8E%B0%E6%95%B0%E6%8D%AE%E8%A2%AB%E5%88%AB%E4%BA%BA%E6%94%B9%E9%94%99%EF%BC%8C%E8%87%AA%E5%B7%B1%E7%9A%84%E5%BA%93%E8%A2%AB%E5%88%AB%E4%BA%BA%E5%86%99%E6%8C%82%E7%AD%89%E6%83%85%E5%86%B5%E3%80%82%0A%0A%E5%A6%82%E6%9E%9C%E4%BD%A0%E8%A6%81%E6%93%8D%E4%BD%9C%E5%88%AB%E4%BA%BA%E7%9A%84%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%BA%93%EF%BC%8C%E4%BD%A0%E5%BF%85%E9%A1%BB%E6%98%AF%E9%80%9A%E8%BF%87**%E8%B0%83%E7%94%A8%E5%88%AB%E7%9A%84%E6%9C%8D%E5%8A%A1%E7%9A%84%E6%8E%A5%E5%8F%A3**%E6%9D%A5%E5%AE%9E%E7%8E%B0%EF%BC%8C%E7%BB%9D%E5%AF%B9%E4%B8%8D%E5%85%81%E8%AE%B8%E4%BA%A4%E5%8F%89%E8%AE%BF%E9%97%AE%E5%88%AB%E4%BA%BA%E7%9A%84%E6%95%B0%E6%8D%AE%E5%BA%93%E3%80%82%0A%0A!%5Bdistributed-transacion-XA%5D(%2Fimages%2Fdistributed-transaction-XA.png)%0A%0A%23%23%23%20TCC%20%E6%96%B9%E6%A1%88%0ATCC%20%E7%9A%84%E5%85%A8%E7%A7%B0%E6%98%AF%EF%BC%9A%60Try%60%E3%80%81%60Confirm%60%E3%80%81%60Cancel%60%E3%80%82%0A%0A-%20Try%20%E9%98%B6%E6%AE%B5%EF%BC%9A%E8%BF%99%E4%B8%AA%E9%98%B6%E6%AE%B5%E8%AF%B4%E7%9A%84%E6%98%AF%E5%AF%B9%E5%90%84%E4%B8%AA%E6%9C%8D%E5%8A%A1%E7%9A%84%E8%B5%84%E6%BA%90%E5%81%9A%E6%A3%80%E6%B5%8B%E4%BB%A5%E5%8F%8A%E5%AF%B9%E8%B5%84%E6%BA%90%E8%BF%9B%E8%A1%8C**%E9%94%81%E5%AE%9A%E6%88%96%E8%80%85%E9%A2%84%E7%95%99**%E3%80%82%0A-%20Confirm%20%E9%98%B6%E6%AE%B5%EF%BC%9A%E8%BF%99%E4%B8%AA%E9%98%B6%E6%AE%B5%E8%AF%B4%E7%9A%84%E6%98%AF%E5%9C%A8%E5%90%84%E4%B8%AA%E6%9C%8D%E5%8A%A1%E4%B8%AD**%E6%89%A7%E8%A1%8C%E5%AE%9E%E9%99%85%E7%9A%84%E6%93%8D%E4%BD%9C**%E3%80%82%0A-%20Cancel%20%E9%98%B6%E6%AE%B5%EF%BC%9A%E5%A6%82%E6%9E%9C%E4%BB%BB%E4%BD%95%E4%B8%80%E4%B8%AA%E6%9C%8D%E5%8A%A1%E7%9A%84%E4%B8%9A%E5%8A%A1%E6%96%B9%E6%B3%95%E6%89%A7%E8%A1%8C%E5%87%BA%E9%94%99%EF%BC%8C%E9%82%A3%E4%B9%88%E8%BF%99%E9%87%8C%E5%B0%B1%E9%9C%80%E8%A6%81**%E8%BF%9B%E8%A1%8C%E8%A1%A5%E5%81%BF**%EF%BC%8C%E5%B0%B1%E6%98%AF%E6%89%A7%E8%A1%8C%E5%B7%B2%E7%BB%8F%E6%89%A7%E8%A1%8C%E6%88%90%E5%8A%9F%E7%9A%84%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E7%9A%84%E5%9B%9E%E6%BB%9A%E6%93%8D%E4%BD%9C%E3%80%82%EF%BC%88%E6%8A%8A%E9%82%A3%E4%BA%9B%E6%89%A7%E8%A1%8C%E6%88%90%E5%8A%9F%E7%9A%84%E5%9B%9E%E6%BB%9A%EF%BC%89%0A%0A%E8%BF%99%E7%A7%8D%E6%96%B9%E6%A1%88%E8%AF%B4%E5%AE%9E%E8%AF%9D%E5%87%A0%E4%B9%8E%E5%BE%88%E5%B0%91%E4%BA%BA%E4%BD%BF%E7%94%A8%EF%BC%8C%E6%88%91%E4%BB%AC%E7%94%A8%E7%9A%84%E4%B9%9F%E6%AF%94%E8%BE%83%E5%B0%91%EF%BC%8C%E4%BD%86%E6%98%AF%E4%B9%9F%E6%9C%89%E4%BD%BF%E7%94%A8%E7%9A%84%E5%9C%BA%E6%99%AF%E3%80%82%E5%9B%A0%E4%B8%BA%E8%BF%99%E4%B8%AA**%E4%BA%8B%E5%8A%A1%E5%9B%9E%E6%BB%9A**%E5%AE%9E%E9%99%85%E4%B8%8A%E6%98%AF**%E4%B8%A5%E9%87%8D%E4%BE%9D%E8%B5%96%E4%BA%8E%E4%BD%A0%E8%87%AA%E5%B7%B1%E5%86%99%E4%BB%A3%E7%A0%81%E6%9D%A5%E5%9B%9E%E6%BB%9A%E5%92%8C%E8%A1%A5%E5%81%BF**%E4%BA%86%EF%BC%8C%E4%BC%9A%E9%80%A0%E6%88%90%E8%A1%A5%E5%81%BF%E4%BB%A3%E7%A0%81%E5%B7%A8%E5%A4%A7%EF%BC%8C%E9%9D%9E%E5%B8%B8%E4%B9%8B%E6%81%B6%E5%BF%83%E3%80%82%0A%0A%E6%AF%94%E5%A6%82%E8%AF%B4%E6%88%91%E4%BB%AC%EF%BC%8C%E4%B8%80%E8%88%AC%E6%9D%A5%E8%AF%B4%E8%B7%9F**%E9%92%B1**%E7%9B%B8%E5%85%B3%E7%9A%84%EF%BC%8C%E8%B7%9F%E9%92%B1%E6%89%93%E4%BA%A4%E9%81%93%E7%9A%84%EF%BC%8C**%E6%94%AF%E4%BB%98**%E3%80%81**%E4%BA%A4%E6%98%93**%E7%9B%B8%E5%85%B3%E7%9A%84%E5%9C%BA%E6%99%AF%EF%BC%8C%E6%88%91%E4%BB%AC%E4%BC%9A%E7%94%A8%20TCC%EF%BC%8C%E4%B8%A5%E6%A0%BC%E4%BF%9D%E8%AF%81%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E8%A6%81%E4%B9%88%E5%85%A8%E9%83%A8%E6%88%90%E5%8A%9F%EF%BC%8C%E8%A6%81%E4%B9%88%E5%85%A8%E9%83%A8%E8%87%AA%E5%8A%A8%E5%9B%9E%E6%BB%9A%EF%BC%8C%E4%B8%A5%E6%A0%BC%E4%BF%9D%E8%AF%81%E8%B5%84%E9%87%91%E7%9A%84%E6%AD%A3%E7%A1%AE%E6%80%A7%EF%BC%8C%E4%BF%9D%E8%AF%81%E5%9C%A8%E8%B5%84%E9%87%91%E4%B8%8A%E4%B8%8D%E4%BC%9A%E5%87%BA%E7%8E%B0%E9%97%AE%E9%A2%98%E3%80%82%0A%0A%E8%80%8C%E4%B8%94%E6%9C%80%E5%A5%BD%E6%98%AF%E4%BD%A0%E7%9A%84%E5%90%84%E4%B8%AA%E4%B8%9A%E5%8A%A1%E6%89%A7%E8%A1%8C%E7%9A%84%E6%97%B6%E9%97%B4%E9%83%BD%E6%AF%94%E8%BE%83%E7%9F%AD%E3%80%82%0A%0A%E4%BD%86%E6%98%AF%E8%AF%B4%E5%AE%9E%E8%AF%9D%EF%BC%8C%E4%B8%80%E8%88%AC%E5%B0%BD%E9%87%8F%E5%88%AB%E8%BF%99%E4%B9%88%E6%90%9E%EF%BC%8C%E8%87%AA%E5%B7%B1%E6%89%8B%E5%86%99%E5%9B%9E%E6%BB%9A%E9%80%BB%E8%BE%91%EF%BC%8C%E6%88%96%E8%80%85%E6%98%AF%E8%A1%A5%E5%81%BF%E9%80%BB%E8%BE%91%EF%BC%8C%E5%AE%9E%E5%9C%A8%E5%A4%AA%E6%81%B6%E5%BF%83%E4%BA%86%EF%BC%8C%E9%82%A3%E4%B8%AA%E4%B8%9A%E5%8A%A1%E4%BB%A3%E7%A0%81%E6%98%AF%E5%BE%88%E9%9A%BE%E7%BB%B4%E6%8A%A4%E7%9A%84%E3%80%82%0A%0A!%5Bdistributed-transacion-TCC%5D(%2Fimages%2Fdistributed-transaction-TCC.png)%0A%0A%23%23%23%20%E6%9C%AC%E5%9C%B0%E6%B6%88%E6%81%AF%E8%A1%A8%0A%E6%9C%AC%E5%9C%B0%E6%B6%88%E6%81%AF%E8%A1%A8%E5%85%B6%E5%AE%9E%E6%98%AF%E5%9B%BD%E5%A4%96%E7%9A%84%20ebay%20%E6%90%9E%E5%87%BA%E6%9D%A5%E7%9A%84%E8%BF%99%E4%B9%88%E4%B8%80%E5%A5%97%E6%80%9D%E6%83%B3%E3%80%82%0A%0A%E8%BF%99%E4%B8%AA%E5%A4%A7%E6%A6%82%E6%84%8F%E6%80%9D%E6%98%AF%E8%BF%99%E6%A0%B7%E7%9A%84%EF%BC%9A%0A%0A1.%20A%20%E7%B3%BB%E7%BB%9F%E5%9C%A8%E8%87%AA%E5%B7%B1%E6%9C%AC%E5%9C%B0%E4%B8%80%E4%B8%AA%E4%BA%8B%E5%8A%A1%E9%87%8C%E6%93%8D%E4%BD%9C%E5%90%8C%E6%97%B6%EF%BC%8C%E6%8F%92%E5%85%A5%E4%B8%80%E6%9D%A1%E6%95%B0%E6%8D%AE%E5%88%B0%E6%B6%88%E6%81%AF%E8%A1%A8%EF%BC%9B%0A2.%20%E6%8E%A5%E7%9D%80%20A%20%E7%B3%BB%E7%BB%9F%E5%B0%86%E8%BF%99%E4%B8%AA%E6%B6%88%E6%81%AF%E5%8F%91%E9%80%81%E5%88%B0%20MQ%20%E4%B8%AD%E5%8E%BB%EF%BC%9B%0A3.%20B%20%E7%B3%BB%E7%BB%9F%E6%8E%A5%E6%94%B6%E5%88%B0%E6%B6%88%E6%81%AF%E4%B9%8B%E5%90%8E%EF%BC%8C%E5%9C%A8%E4%B8%80%E4%B8%AA%E4%BA%8B%E5%8A%A1%E9%87%8C%EF%BC%8C%E5%BE%80%E8%87%AA%E5%B7%B1%E6%9C%AC%E5%9C%B0%E6%B6%88%E6%81%AF%E8%A1%A8%E9%87%8C%E6%8F%92%E5%85%A5%E4%B8%80%E6%9D%A1%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%90%8C%E6%97%B6%E6%89%A7%E8%A1%8C%E5%85%B6%E4%BB%96%E7%9A%84%E4%B8%9A%E5%8A%A1%E6%93%8D%E4%BD%9C%EF%BC%8C%E5%A6%82%E6%9E%9C%E8%BF%99%E4%B8%AA%E6%B6%88%E6%81%AF%E5%B7%B2%E7%BB%8F%E8%A2%AB%E5%A4%84%E7%90%86%E8%BF%87%E4%BA%86%EF%BC%8C%E9%82%A3%E4%B9%88%E6%AD%A4%E6%97%B6%E8%BF%99%E4%B8%AA%E4%BA%8B%E5%8A%A1%E4%BC%9A%E5%9B%9E%E6%BB%9A%EF%BC%8C%E8%BF%99%E6%A0%B7**%E4%BF%9D%E8%AF%81%E4%B8%8D%E4%BC%9A%E9%87%8D%E5%A4%8D%E5%A4%84%E7%90%86%E6%B6%88%E6%81%AF**%EF%BC%9B%0A4.%20B%20%E7%B3%BB%E7%BB%9F%E6%89%A7%E8%A1%8C%E6%88%90%E5%8A%9F%E4%B9%8B%E5%90%8E%EF%BC%8C%E5%B0%B1%E4%BC%9A%E6%9B%B4%E6%96%B0%E8%87%AA%E5%B7%B1%E6%9C%AC%E5%9C%B0%E6%B6%88%E6%81%AF%E8%A1%A8%E7%9A%84%E7%8A%B6%E6%80%81%E4%BB%A5%E5%8F%8A%20A%20%E7%B3%BB%E7%BB%9F%E6%B6%88%E6%81%AF%E8%A1%A8%E7%9A%84%E7%8A%B6%E6%80%81%EF%BC%9B%0A5.%20%E5%A6%82%E6%9E%9C%20B%20%E7%B3%BB%E7%BB%9F%E5%A4%84%E7%90%86%E5%A4%B1%E8%B4%A5%E4%BA%86%EF%BC%8C%E9%82%A3%E4%B9%88%E5%B0%B1%E4%B8%8D%E4%BC%9A%E6%9B%B4%E6%96%B0%E6%B6%88%E6%81%AF%E8%A1%A8%E7%8A%B6%E6%80%81%EF%BC%8C%E9%82%A3%E4%B9%88%E6%AD%A4%E6%97%B6%20A%20%E7%B3%BB%E7%BB%9F%E4%BC%9A%E5%AE%9A%E6%97%B6%E6%89%AB%E6%8F%8F%E8%87%AA%E5%B7%B1%E7%9A%84%E6%B6%88%E6%81%AF%E8%A1%A8%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%9C%89%E6%9C%AA%E5%A4%84%E7%90%86%E7%9A%84%E6%B6%88%E6%81%AF%EF%BC%8C%E4%BC%9A%E5%86%8D%E6%AC%A1%E5%8F%91%E9%80%81%E5%88%B0%20MQ%20%E4%B8%AD%E5%8E%BB%EF%BC%8C%E8%AE%A9%20B%20%E5%86%8D%E6%AC%A1%E5%A4%84%E7%90%86%EF%BC%9B%0A6.%20%E8%BF%99%E4%B8%AA%E6%96%B9%E6%A1%88%E4%BF%9D%E8%AF%81%E4%BA%86%E6%9C%80%E7%BB%88%E4%B8%80%E8%87%B4%E6%80%A7%EF%BC%8C%E5%93%AA%E6%80%95%20B%20%E4%BA%8B%E5%8A%A1%E5%A4%B1%E8%B4%A5%E4%BA%86%EF%BC%8C%E4%BD%86%E6%98%AF%20A%20%E4%BC%9A%E4%B8%8D%E6%96%AD%E9%87%8D%E5%8F%91%E6%B6%88%E6%81%AF%EF%BC%8C%E7%9B%B4%E5%88%B0%20B%20%E9%82%A3%E8%BE%B9%E6%88%90%E5%8A%9F%E4%B8%BA%E6%AD%A2%E3%80%82%0A%0A%E8%BF%99%E4%B8%AA%E6%96%B9%E6%A1%88%E8%AF%B4%E5%AE%9E%E8%AF%9D%E6%9C%80%E5%A4%A7%E7%9A%84%E9%97%AE%E9%A2%98%E5%B0%B1%E5%9C%A8%E4%BA%8E**%E4%B8%A5%E9%87%8D%E4%BE%9D%E8%B5%96%E4%BA%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%B6%88%E6%81%AF%E8%A1%A8%E6%9D%A5%E7%AE%A1%E7%90%86%E4%BA%8B%E5%8A%A1**%E5%95%A5%E7%9A%84%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%98%AF%E9%AB%98%E5%B9%B6%E5%8F%91%E5%9C%BA%E6%99%AF%E5%92%8B%E5%8A%9E%E5%91%A2%EF%BC%9F%E5%92%8B%E6%89%A9%E5%B1%95%E5%91%A2%EF%BC%9F%E6%89%80%E4%BB%A5%E4%B8%80%E8%88%AC%E7%A1%AE%E5%AE%9E%E5%BE%88%E5%B0%91%E7%94%A8%E3%80%82%0A%0A!%5Bdistributed-transaction-local-message-table%5D(%2Fimages%2Fdistributed-transaction-local-message-table.png)%0A%0A%23%23%23%20%E5%8F%AF%E9%9D%A0%E6%B6%88%E6%81%AF%E6%9C%80%E7%BB%88%E4%B8%80%E8%87%B4%E6%80%A7%E6%96%B9%E6%A1%88%0A%E8%BF%99%E4%B8%AA%E7%9A%84%E6%84%8F%E6%80%9D%EF%BC%8C%E5%B0%B1%E6%98%AF%E5%B9%B2%E8%84%86%E4%B8%8D%E8%A6%81%E7%94%A8%E6%9C%AC%E5%9C%B0%E7%9A%84%E6%B6%88%E6%81%AF%E8%A1%A8%E4%BA%86%EF%BC%8C%E7%9B%B4%E6%8E%A5%E5%9F%BA%E4%BA%8E%20MQ%20%E6%9D%A5%E5%AE%9E%E7%8E%B0%E4%BA%8B%E5%8A%A1%E3%80%82%E6%AF%94%E5%A6%82%E9%98%BF%E9%87%8C%E7%9A%84%20RocketMQ%20%E5%B0%B1%E6%94%AF%E6%8C%81%E6%B6%88%E6%81%AF%E4%BA%8B%E5%8A%A1%E3%80%82%0A%0A%E5%A4%A7%E6%A6%82%E7%9A%84%E6%84%8F%E6%80%9D%E5%B0%B1%E6%98%AF%EF%BC%9A%0A%0A1.%20A%20%E7%B3%BB%E7%BB%9F%E5%85%88%E5%8F%91%E9%80%81%E4%B8%80%E4%B8%AA%20prepared%20%E6%B6%88%E6%81%AF%E5%88%B0%20mq%EF%BC%8C%E5%A6%82%E6%9E%9C%E8%BF%99%E4%B8%AA%20prepared%20%E6%B6%88%E6%81%AF%E5%8F%91%E9%80%81%E5%A4%B1%E8%B4%A5%E9%82%A3%E4%B9%88%E5%B0%B1%E7%9B%B4%E6%8E%A5%E5%8F%96%E6%B6%88%E6%93%8D%E4%BD%9C%E5%88%AB%E6%89%A7%E8%A1%8C%E4%BA%86%EF%BC%9B%0A2.%20%E5%A6%82%E6%9E%9C%E8%BF%99%E4%B8%AA%E6%B6%88%E6%81%AF%E5%8F%91%E9%80%81%E6%88%90%E5%8A%9F%E8%BF%87%E4%BA%86%EF%BC%8C%E9%82%A3%E4%B9%88%E6%8E%A5%E7%9D%80%E6%89%A7%E8%A1%8C%E6%9C%AC%E5%9C%B0%E4%BA%8B%E5%8A%A1%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%88%90%E5%8A%9F%E5%B0%B1%E5%91%8A%E8%AF%89%20mq%20%E5%8F%91%E9%80%81%E7%A1%AE%E8%AE%A4%E6%B6%88%E6%81%AF%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%A4%B1%E8%B4%A5%E5%B0%B1%E5%91%8A%E8%AF%89%20mq%20%E5%9B%9E%E6%BB%9A%E6%B6%88%E6%81%AF%EF%BC%9B%0A3.%20%E5%A6%82%E6%9E%9C%E5%8F%91%E9%80%81%E4%BA%86%E7%A1%AE%E8%AE%A4%E6%B6%88%E6%81%AF%EF%BC%8C%E9%82%A3%E4%B9%88%E6%AD%A4%E6%97%B6%20B%20%E7%B3%BB%E7%BB%9F%E4%BC%9A%E6%8E%A5%E6%94%B6%E5%88%B0%E7%A1%AE%E8%AE%A4%E6%B6%88%E6%81%AF%EF%BC%8C%E7%84%B6%E5%90%8E%E6%89%A7%E8%A1%8C%E6%9C%AC%E5%9C%B0%E7%9A%84%E4%BA%8B%E5%8A%A1%EF%BC%9B%0A4.%20mq%20%E4%BC%9A%E8%87%AA%E5%8A%A8**%E5%AE%9A%E6%97%B6%E8%BD%AE%E8%AF%A2**%E6%89%80%E6%9C%89%20prepared%20%E6%B6%88%E6%81%AF%E5%9B%9E%E8%B0%83%E4%BD%A0%E7%9A%84%E6%8E%A5%E5%8F%A3%EF%BC%8C%E9%97%AE%E4%BD%A0%EF%BC%8C%E8%BF%99%E4%B8%AA%E6%B6%88%E6%81%AF%E6%98%AF%E4%B8%8D%E6%98%AF%E6%9C%AC%E5%9C%B0%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86%E5%A4%B1%E8%B4%A5%E4%BA%86%EF%BC%8C%E6%89%80%E6%9C%89%E6%B2%A1%E5%8F%91%E9%80%81%E7%A1%AE%E8%AE%A4%E7%9A%84%E6%B6%88%E6%81%AF%EF%BC%8C%E6%98%AF%E7%BB%A7%E7%BB%AD%E9%87%8D%E8%AF%95%E8%BF%98%E6%98%AF%E5%9B%9E%E6%BB%9A%EF%BC%9F%E4%B8%80%E8%88%AC%E6%9D%A5%E8%AF%B4%E8%BF%99%E9%87%8C%E4%BD%A0%E5%B0%B1%E5%8F%AF%E4%BB%A5%E6%9F%A5%E4%B8%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9C%8B%E4%B9%8B%E5%89%8D%E6%9C%AC%E5%9C%B0%E4%BA%8B%E5%8A%A1%E6%98%AF%E5%90%A6%E6%89%A7%E8%A1%8C%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%9B%9E%E6%BB%9A%E4%BA%86%EF%BC%8C%E9%82%A3%E4%B9%88%E8%BF%99%E9%87%8C%E4%B9%9F%E5%9B%9E%E6%BB%9A%E5%90%A7%E3%80%82%E8%BF%99%E4%B8%AA%E5%B0%B1%E6%98%AF%E9%81%BF%E5%85%8D%E5%8F%AF%E8%83%BD%E6%9C%AC%E5%9C%B0%E4%BA%8B%E5%8A%A1%E6%89%A7%E8%A1%8C%E6%88%90%E5%8A%9F%E4%BA%86%EF%BC%8C%E8%80%8C%E7%A1%AE%E8%AE%A4%E6%B6%88%E6%81%AF%E5%8D%B4%E5%8F%91%E9%80%81%E5%A4%B1%E8%B4%A5%E4%BA%86%E3%80%82%0A5.%20%E8%BF%99%E4%B8%AA%E6%96%B9%E6%A1%88%E9%87%8C%EF%BC%8C%E8%A6%81%E6%98%AF%E7%B3%BB%E7%BB%9F%20B%20%E7%9A%84%E4%BA%8B%E5%8A%A1%E5%A4%B1%E8%B4%A5%E4%BA%86%E5%92%8B%E5%8A%9E%EF%BC%9F%E9%87%8D%E8%AF%95%E5%92%AF%EF%BC%8C%E8%87%AA%E5%8A%A8%E4%B8%8D%E6%96%AD%E9%87%8D%E8%AF%95%E7%9B%B4%E5%88%B0%E6%88%90%E5%8A%9F%EF%BC%8C%E5%A6%82%E6%9E%9C%E5%AE%9E%E5%9C%A8%E6%98%AF%E4%B8%8D%E8%A1%8C%EF%BC%8C%E8%A6%81%E4%B9%88%E5%B0%B1%E6%98%AF%E9%92%88%E5%AF%B9%E9%87%8D%E8%A6%81%E7%9A%84%E8%B5%84%E9%87%91%E7%B1%BB%E4%B8%9A%E5%8A%A1%E8%BF%9B%E8%A1%8C%E5%9B%9E%E6%BB%9A%EF%BC%8C%E6%AF%94%E5%A6%82%20B%20%E7%B3%BB%E7%BB%9F%E6%9C%AC%E5%9C%B0%E5%9B%9E%E6%BB%9A%E5%90%8E%EF%BC%8C%E6%83%B3%E5%8A%9E%E6%B3%95%E9%80%9A%E7%9F%A5%E7%B3%BB%E7%BB%9F%20A%20%E4%B9%9F%E5%9B%9E%E6%BB%9A%EF%BC%9B%E6%88%96%E8%80%85%E6%98%AF%E5%8F%91%E9%80%81%E6%8A%A5%E8%AD%A6%E7%94%B1%E4%BA%BA%E5%B7%A5%E6%9D%A5%E6%89%8B%E5%B7%A5%E5%9B%9E%E6%BB%9A%E5%92%8C%E8%A1%A5%E5%81%BF%E3%80%82%0A6.%20%E8%BF%99%E4%B8%AA%E8%BF%98%E6%98%AF%E6%AF%94%E8%BE%83%E5%90%88%E9%80%82%E7%9A%84%EF%BC%8C%E7%9B%AE%E5%89%8D%E5%9B%BD%E5%86%85%E4%BA%92%E8%81%94%E7%BD%91%E5%85%AC%E5%8F%B8%E5%A4%A7%E9%83%BD%E6%98%AF%E8%BF%99%E4%B9%88%E7%8E%A9%E5%84%BF%E7%9A%84%EF%BC%8C%E8%A6%81%E4%B8%8D%E4%BD%A0%E4%B8%BE%E7%94%A8%20RocketMQ%20%E6%94%AF%E6%8C%81%E7%9A%84%EF%BC%8C%E8%A6%81%E4%B8%8D%E4%BD%A0%E5%B0%B1%E8%87%AA%E5%B7%B1%E5%9F%BA%E4%BA%8E%E7%B1%BB%E4%BC%BC%20ActiveMQ%EF%BC%9FRabbitMQ%EF%BC%9F%E8%87%AA%E5%B7%B1%E5%B0%81%E8%A3%85%E4%B8%80%E5%A5%97%E7%B1%BB%E4%BC%BC%E7%9A%84%E9%80%BB%E8%BE%91%E5%87%BA%E6%9D%A5%EF%BC%8C%E6%80%BB%E4%B9%8B%E6%80%9D%E8%B7%AF%E5%B0%B1%E6%98%AF%E8%BF%99%E6%A0%B7%E5%AD%90%E7%9A%84%E3%80%82%0A%0A!%5Bdistributed-transaction-reliable-message%5D(%2Fimages%2Fdistributed-transaction-reliable-message.png)%0A%0A%23%23%23%20%E6%9C%80%E5%A4%A7%E5%8A%AA%E5%8A%9B%E9%80%9A%E7%9F%A5%E6%96%B9%E6%A1%88%0A%E8%BF%99%E4%B8%AA%E6%96%B9%E6%A1%88%E7%9A%84%E5%A4%A7%E8%87%B4%E6%84%8F%E6%80%9D%E5%B0%B1%E6%98%AF%EF%BC%9A%0A%0A1.%20%E7%B3%BB%E7%BB%9F%20A%20%E6%9C%AC%E5%9C%B0%E4%BA%8B%E5%8A%A1%E6%89%A7%E8%A1%8C%E5%AE%8C%E4%B9%8B%E5%90%8E%EF%BC%8C%E5%8F%91%E9%80%81%E4%B8%AA%E6%B6%88%E6%81%AF%E5%88%B0%20MQ%EF%BC%9B%0A2.%20%E8%BF%99%E9%87%8C%E4%BC%9A%E6%9C%89%E4%B8%AA%E4%B8%93%E9%97%A8%E6%B6%88%E8%B4%B9%20MQ%20%E7%9A%84**%E6%9C%80%E5%A4%A7%E5%8A%AA%E5%8A%9B%E9%80%9A%E7%9F%A5%E6%9C%8D%E5%8A%A1**%EF%BC%8C%E8%BF%99%E4%B8%AA%E6%9C%8D%E5%8A%A1%E4%BC%9A%E6%B6%88%E8%B4%B9%20MQ%20%E7%84%B6%E5%90%8E%E5%86%99%E5%85%A5%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E8%AE%B0%E5%BD%95%E4%B8%8B%E6%9D%A5%EF%BC%8C%E6%88%96%E8%80%85%E6%98%AF%E6%94%BE%E5%85%A5%E4%B8%AA%E5%86%85%E5%AD%98%E9%98%9F%E5%88%97%E4%B9%9F%E5%8F%AF%E4%BB%A5%EF%BC%8C%E6%8E%A5%E7%9D%80%E8%B0%83%E7%94%A8%E7%B3%BB%E7%BB%9F%20B%20%E7%9A%84%E6%8E%A5%E5%8F%A3%EF%BC%9B%0A3.%20%E8%A6%81%E6%98%AF%E7%B3%BB%E7%BB%9F%20B%20%E6%89%A7%E8%A1%8C%E6%88%90%E5%8A%9F%E5%B0%B1%20ok%20%E4%BA%86%EF%BC%9B%E8%A6%81%E6%98%AF%E7%B3%BB%E7%BB%9F%20B%20%E6%89%A7%E8%A1%8C%E5%A4%B1%E8%B4%A5%E4%BA%86%EF%BC%8C%E9%82%A3%E4%B9%88%E6%9C%80%E5%A4%A7%E5%8A%AA%E5%8A%9B%E9%80%9A%E7%9F%A5%E6%9C%8D%E5%8A%A1%E5%B0%B1%E5%AE%9A%E6%97%B6%E5%B0%9D%E8%AF%95%E9%87%8D%E6%96%B0%E8%B0%83%E7%94%A8%E7%B3%BB%E7%BB%9F%20B%EF%BC%8C%E5%8F%8D%E5%A4%8D%20N%20%E6%AC%A1%EF%BC%8C%E6%9C%80%E5%90%8E%E8%BF%98%E6%98%AF%E4%B8%8D%E8%A1%8C%E5%B0%B1%E6%94%BE%E5%BC%83%E3%80%82%0A%0A%23%23%23%20%E4%BD%A0%E4%BB%AC%E5%85%AC%E5%8F%B8%E6%98%AF%E5%A6%82%E4%BD%95%E5%A4%84%E7%90%86%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E7%9A%84%EF%BC%9F%0A%E5%A6%82%E6%9E%9C%E4%BD%A0%E7%9C%9F%E7%9A%84%E8%A2%AB%E9%97%AE%E5%88%B0%EF%BC%8C%E5%8F%AF%E4%BB%A5%E8%BF%99%E4%B9%88%E8%AF%B4%EF%BC%8C%E6%88%91%E4%BB%AC%E6%9F%90%E6%9F%90%E7%89%B9%E5%88%AB%E4%B8%A5%E6%A0%BC%E7%9A%84%E5%9C%BA%E6%99%AF%EF%BC%8C%E7%94%A8%E7%9A%84%E6%98%AF%20TCC%20%E6%9D%A5%E4%BF%9D%E8%AF%81%E5%BC%BA%E4%B8%80%E8%87%B4%E6%80%A7%EF%BC%9B%E7%84%B6%E5%90%8E%E5%85%B6%E4%BB%96%E7%9A%84%E4%B8%80%E4%BA%9B%E5%9C%BA%E6%99%AF%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E7%9A%84%20RocketMQ%20%E6%9D%A5%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E3%80%82%0A%0A%E4%BD%A0%E6%89%BE%E4%B8%80%E4%B8%AA%E4%B8%A5%E6%A0%BC%E8%B5%84%E9%87%91%E8%A6%81%E6%B1%82%E7%BB%9D%E5%AF%B9%E4%B8%8D%E8%83%BD%E9%94%99%E7%9A%84%E5%9C%BA%E6%99%AF%EF%BC%8C%E4%BD%A0%E5%8F%AF%E4%BB%A5%E8%AF%B4%E4%BD%A0%E6%98%AF%E7%94%A8%E7%9A%84%20TCC%20%E6%96%B9%E6%A1%88%EF%BC%9B%E5%A6%82%E6%9E%9C%E6%98%AF%E4%B8%80%E8%88%AC%E7%9A%84%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E5%9C%BA%E6%99%AF%EF%BC%8C%E8%AE%A2%E5%8D%95%E6%8F%92%E5%85%A5%E4%B9%8B%E5%90%8E%E8%A6%81%E8%B0%83%E7%94%A8%E5%BA%93%E5%AD%98%E6%9C%8D%E5%8A%A1%E6%9B%B4%E6%96%B0%E5%BA%93%E5%AD%98%EF%BC%8C%E5%BA%93%E5%AD%98%E6%95%B0%E6%8D%AE%E6%B2%A1%E6%9C%89%E8%B5%84%E9%87%91%E9%82%A3%E4%B9%88%E7%9A%84%E6%95%8F%E6%84%9F%EF%BC%8C%E5%8F%AF%E4%BB%A5%E7%94%A8%E5%8F%AF%E9%9D%A0%E6%B6%88%E6%81%AF%E6%9C%80%E7%BB%88%E4%B8%80%E8%87%B4%E6%80%A7%E6%96%B9%E6%A1%88%E3%80%82%0A%0A%E5%8F%8B%E6%83%85%E6%8F%90%E7%A4%BA%E4%B8%80%E4%B8%8B%EF%BC%8CRocketMQ%203.2.6%20%E4%B9%8B%E5%89%8D%E7%9A%84%E7%89%88%E6%9C%AC%EF%BC%8C%E6%98%AF%E5%8F%AF%E4%BB%A5%E6%8C%89%E7%85%A7%E4%B8%8A%E9%9D%A2%E7%9A%84%E6%80%9D%E8%B7%AF%E6%9D%A5%E7%9A%84%EF%BC%8C%E4%BD%86%E6%98%AF%E4%B9%8B%E5%90%8E%E6%8E%A5%E5%8F%A3%E5%81%9A%E4%BA%86%E4%B8%80%E4%BA%9B%E6%94%B9%E5%8F%98%EF%BC%8C%E6%88%91%E8%BF%99%E9%87%8C%E4%B8%8D%E5%86%8D%E8%B5%98%E8%BF%B0%E4%BA%86%E3%80%82%0A%0A%E5%BD%93%E7%84%B6%E5%A6%82%E6%9E%9C%E4%BD%A0%E6%84%BF%E6%84%8F%EF%BC%8C%E4%BD%A0%E5%8F%AF%E4%BB%A5%E5%8F%82%E8%80%83%E5%8F%AF%E9%9D%A0%E6%B6%88%E6%81%AF%E6%9C%80%E7%BB%88%E4%B8%80%E8%87%B4%E6%80%A7%E6%96%B9%E6%A1%88%E6%9D%A5%E8%87%AA%E5%B7%B1%E5%AE%9E%E7%8E%B0%E4%B8%80%E5%A5%97%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%EF%BC%8C%E6%AF%94%E5%A6%82%E5%9F%BA%E4%BA%8E%20RocketMQ%20%E6%9D%A5%E7%8E%A9%E5%84%BF%E3%80%82</center></span>
</div></body></html> 